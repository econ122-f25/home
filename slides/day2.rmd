---
title: "Reproducible Reports & Version Control"
subtitle: "Day 2"
author: "Econ 122"
date: "`r Sys.Date()`"
output:
   ioslides_presentation:
    widescreen: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,          # Don't show the code in the output
  eval=FALSE,
  warning = FALSE,       # Hide all warnings
  message = FALSE,       # Hide all messages from packages
  fig.width = 6,         # Set a default width for all figures
  fig.height = 4,        # Set a default height for all figures
  fig.align = "center"   # Center all figures
)
```

## Welcome to Day 2!

- **Topic:** Reproducible Reports & Version Control
- **Today's Goals:**
    - Learn how to create dynamic, reproducible reports using R Markdown.
    - Understand the basics of version control with Git.
    - See how to collaborate using GitHub.
- **Why is this important?** Reproducibility is the cornerstone of good data science. It ensures your work is transparent, verifiable, and easy to share.

## What is R Markdown?

- R Markdown is a powerful tool for creating dynamic documents from R.
- It combines text, R code, and the output of that code into a single, elegant report.
- **Key Idea:** If someone else has your R Markdown file and your data, they can recreate your exact analysis and report.

## The Anatomy of an R Markdown File

An R Markdown file (`.Rmd`) has three main components:

1.  **YAML Header:** Metadata at the top, enclosed by `---`.

    ```yaml
    ---
    title: "My First R Markdown Report"
    author: "Your Name"
    date: "August 4, 2025"
    output: html_document
    ---
    ```

2.  **Text:** The narrative of your report, written in Markdown.

3.  **Code Chunks:** Sections of R code that are executed and whose output is displayed.

## Basic Markdown Syntax

You can use simple Markdown to format your text.


- `# Header 1`
- `## Header 2`
- `### Header 3`
-  `Item 1`
-  `Item 2`
- `**Bold text** and *italic text*.`
- `[A link to Google](https://www.google.com)`

## Hands-on Example: Your First Code Chunk

Let's start with a simple R code chunk.

**Your Turn:**

1.  Open a new R Markdown file in RStudio (`File > New File > R Markdown...`).
2.  Add the following code chunk.
3.  Click the "Knit" button to see the output.

```{r}
# This is a comment
x <- 1:10
y <- x^2
plot(x, y, main = "A Simple Plot")
```

## Code Chunk Options

Code chunks have powerful options to control their behavior.

* `echo=FALSE`: Hide the code, but show the output. Useful for final report.
* `eval=FALSE`: Show the code, but don't run it. Useful for examples.
* `include=FALSE`: Hide both the code and the output. When you want to load something.
* `message=FALSE`: Suppress any messages generated by the code.

**Your Turn:**
Try adding `echo=FALSE` to the previous code chunk and re-knitting the document.

## Hands-on Example: Including a Table 

R Markdown can easily display data tables. We'll use the built-in `mtcars` dataset.

**Your Turn:**
Add this new code chunk to your R Markdown file.

```{r}
# Display the first few rows of the mtcars dataset
head(mtcars)
```

## Hands-on Example: Combining Text and Code

Let's write a sentence that dynamically pulls a value from our code.

**Your Turn:**

1.  Add the following code to your `.Rmd` file.
2.  Notice the use of `` `r` `` to inline a value.

```{r}
We can calculate the average miles per gallon of the `mtcars` dataset. 
The average MPG is `r mean(mtcars$mpg)`.
```

- Much better than hardcoding values

## Hands-on Example: Plotting a Graph 

Create a simple scatter plot using the `ggplot2` package.

**Your Turn:**

1.  Make sure you have `ggplot2` installed (`install.packages("ggplot2")`).
2.  Add this code chunk.

```{r}
install.packages("ggplot2")
library(ggplot2)

ggplot(mtcars, aes(x = wt, y = mpg)) +
  geom_point() +
  labs(title = "MPG vs. Weight", x = "Weight (1000 lbs)", y = "Miles per Gallon")
```

## Knitting Your Report

The "Knit" button turns your `.Rmd` file into a final document.

- **github_document** (creates a .md Markdown doc): default for assignments -- easy to view in github
- **html_document** (can't view in GitHub)
- **pdf_document** (need MikTex or MacTex installed)
- **ioslides_presentation**: Nice when you want to convert your document into slides with dynamic references

- for help: in Rstudio select `Help > Cheatsheets > R Markdown Cheat Sheet`

**Summary:** R Markdown makes your analysis transparent and easy to update.

## Why Version Control?

* Imagine working on a project and saving files like 
    - `my_analysis_v1.R`
    - `my_analysis_final.R` 
    - `my_analysis_final_final.R`. 
    
This is confusing!

* **Git** solves this. It's a system that records changes to a file or set of files over time, so you can recall specific versions later.
* RStudio has fantastic built-in Git integration, so you can focus on your data analysis, not file management.

## Step 1: Create a Repository on GitHub

**This is where your project will live online.**

1. Go to **`github.com`** and sign in.
2. Click the **`+`** icon in the top right and select **"New repository"**.
3. Give it a name (e.g., `my-data-project`).
4. You can add a description.
5. **Do not** check the box to initialize with a `README`. We'll do that from RStudio.
6. Click **"Create repository"**.
7. Copy the repository's HTTPS URL.

## Step 2: Clone the Project into RStudio

**This downloads a local copy of your new project.**

1. In RStudio, go to `File > New Project...`
2. Select **"Version Control"** then **"Git"**.
3. Paste the URL you just copied into the **"Repository URL"** field.
4. Choose a project directory name and click **"Create Project"**.

RStudio will download a copy of the project and its history, and the Git tab will appear automatically.

## The RStudio Git View

RStudio makes the three stages of Git very visual:

1. **Working Directory:** Your project files, as seen in the "Files" pane.
2. **Staging Area:** The **"Staged"** column in the **"Git"** tab. A checked box means the change is ready to be committed.
3. **Git Repository:** The history of your commits, which you can view with the **"History"** button in the Git tab.

## Your First Commit and Push

Let's make a change and push it to the GitHub repository.

1. In RStudio, create a new R Markdown file (`File` > New` File > R Markdown...`) and save it as `README.Rmd`.
2. In the **"Git"** tab, you'll see the file with yellow question marks.
3. **Stage the file:** Click the **"Staged"** checkbox next to the file.
4. **Commit the change:** Click the **"Commit"** button. A new window will appear.
5. Write a clear commit message (e.g., "Initial commit of the project with a README.") and click **"Commit"**.
6. **Push the change:** Close the commit window and click the green **"Push"** (up arrow) button in the Git tab to send your changes to GitHub.

## Pulling Changes from Others

When working in a team, others will also be pushing changes. You need to pull their changes to your local machine to stay up to date.

* **Pulling:** Click the blue **"Pull"** (down arrow) button in the Git tab.
* **Best Practice:** Always "Pull" before you start working and before you "Push" your own changes. This helps avoid conflicts.

## Summary 

* **R Markdown:** A single document that combines text and code for creating reproducible reports.
* **Git:** A local tool for tracking changes in your files.
* **GitHub:** A remote service for storing your Git repositories, enabling collaboration and backups.
* **RStudio:** Integrates seamlessly with Git to provide a simple, visual workflow.
